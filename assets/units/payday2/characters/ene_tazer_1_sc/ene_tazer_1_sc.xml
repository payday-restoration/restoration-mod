<sequence_manager>
	<unit>
		<variables>
			
			<var_gadgets_flashlight value="0"/>								
		</variables>

		<body name="'glass_visor'">
			<endurance bullet="2" explosion="4">
				<run_sequence name="'crk_visor'"/>
			</endurance>
			<endurance explosion="6">
				<run_sequence name="'destroy_visor'"/>
			</endurance>
		</body>	
		
		<body name="'bag'">
			<endurance damage="15" >
				<run_sequence name="'detonate'"/>
			</endurance>
		</body>	
		
		<body name="'bag_gren'">
			<endurance damage="15" >
				<run_sequence name="'detonate_fart'"/>
			</endurance>
		</body>	
		
		<filter name="'check_flashlights'">
			<check value="vars.var_gadgets_flashlight == 1"/>
		</filter>
				
		<sequence editable_state="true" name="'taser_helmetlight'" triggable="true" once="true">						
			<set_variables var_gadgets_flashlight="1"/>			
			<run_sequence name="'gadget_meat_grinder'"/>		
		</sequence>

		<sequence editable_state="true" name="'gadget_meat_grinder'" triggable="true" startup="true" once="true">	
			
			<!-- rifleman -->
			<run_sequence name="'head_'..pick('a','b','c','d','e','f','g', 'h', 'i', 'j', 'k', 'l', 'm', 'balaclava', 'k', 'c')"/>
			<run_sequence name="'holster_'..pick('r','r','r','r','l','l','twinnem')"/>

			<!-- ar (flashlight on)-->
			<run_sequence filter="'check_flashlights'" name="'flashlight_on'"/>
		</sequence>

		<sequence name="'detonate'" once="true">		
			<function extension="'character_damage'" function="'taser_bag_explode'" start_time="0"/>
			<body enabled="false" name="'bag'"/>
			<object enabled="false" name="'g_explosivebag'"/>			
			<decal_mesh enabled="false" name="'dm_explosion'"/>
		</sequence>

		<sequence name="'detonate_fart'" once="true">		
			<function extension="'character_damage'" function="'grenadier_bag_explode'" start_time="0"/>
			<body enabled="false" name="'bag_gren'"/>
			<object enabled="false" name="'g_explosivebag'"/>			
			<object enabled="false" name="'g_explosivebag_lod1'"/>			
			<decal_mesh enabled="false" name="'dm_explosion'"/>
		</sequence>

		<sequence editable_state="true" name="'crk_visor'" once="true" triggable="true">
			<object enabled="false" name="'g_helmet_lod3'"/>
			<object enabled="true" name="'g_helmet_lod4'"/>
			
			<object enabled="false" name="'g_glass'"/>
			<object enabled="true" name="'g_glass_sht'"/>
			
			<effect damp_time="5" name="'effects/particles/bullet_hit/glass_breakable/bullet_hit_glass_breakable'" parent="object( 'Head' )" position="v()"/>
		</sequence>

		<sequence editable_state="true" name="'destroy_visor'" once="true" triggable="true">
			<object  enabled="false" name="'g_helmet_lod3'"/>
			<object  enabled="false" name="'g_helmet_lod4'"/>

			<object enabled="false" name="'g_glass_sht'"/>			
			<object enabled="false" name="'g_glass'"/>			
			<object  enabled="true" name="'g_glass_crk'"/>
			
			<body enabled="false" name="'glass_visor'" />
			<decal_mesh enabled="false" name="'dm_glass'" />
			
			<effect  damp_time="4" name="'effects/particles/bullet_hit/glass_breakable/bullet_hit_glass_breakable'" parent="object( 'Head' )" position="v()"/>			
			<effect  damp_time="5" name="'effects/particles/bullet_hit/glass_breakable/bullet_hit_glass_breakable'" parent="object( 'Head' )" position="v()"/>
			
			<sound action="'play'" event="'swat_heavy_visor_shatter'" object="'Head'"/>			
			<sound action="'play'" event="'swat_heavy_visor_shatter'" object="'Head'"/>			
		</sequence>				

		<sequence editable_state="true" name="'flashlight_on'" once="true" triggable="true">
			<effect_spawner enabled="true" name="'es_flashlight'"/>
		</sequence>
		
		<sequence editable_state="true" name="'spawn_helmet'" once="true" triggable="true">									
			<body  enabled="false" name="'glass_visor'" />	
			<decal_mesh  enabled="false" name="'dm_glass'" />													

			<run_sequence  name="'destroy_visor'"/>			
									
			<effect_spawner enabled="false" name="'es_flashlight'"/>			
		</sequence>		

		<sequence editable_state="true" name="'head_a'" triggable="true" once="true">	
			<object enabled="true" name="'g_head_a'"/>
			<object enabled="true" name="'g_head_a_lod1'"/>	
		</sequence>							

		<sequence editable_state="true" name="'head_b'" triggable="true" once="true">	
			<object enabled="true" name="'g_head_b'"/>
			<object enabled="true" name="'g_head_b_lod1'"/>	
		</sequence>							

		<sequence editable_state="true" name="'head_c'" triggable="true" once="true">	
			<object enabled="true" name="'g_head_c'"/>
			<object enabled="true" name="'g_head_c_lod1'"/>	
		</sequence>							

		<sequence editable_state="true" name="'head_d'" triggable="true" once="true">	
			<object enabled="true" name="'g_head_d'"/>
			<object enabled="true" name="'g_head_d_lod1'"/>	
		</sequence>							

		<sequence editable_state="true" name="'head_e'" triggable="true" once="true">	
			<object enabled="true" name="'g_head_e'"/>
			<object enabled="true" name="'g_head_e_lod1'"/>	
		</sequence>							

		<sequence editable_state="true" name="'head_f'" triggable="true" once="true">	
			<object enabled="true" name="'g_head_f'"/>
			<object enabled="true" name="'g_head_f_lod1'"/>	
		</sequence>							

		<sequence editable_state="true" name="'head_g'" triggable="true" once="true">	
			<object enabled="true" name="'g_head_g'"/>
			<object enabled="true" name="'g_head_g_lod1'"/>	
		</sequence>							

		<sequence editable_state="true" name="'head_h'" triggable="true" once="true">	
			<object enabled="true" name="'g_head_h'"/>
			<object enabled="true" name="'g_head_h_lod1'"/>	
		</sequence>							

		<sequence editable_state="true" name="'head_i'" triggable="true" once="true">	
			<object enabled="true" name="'g_head_i'"/>
			<object enabled="true" name="'g_head_i_lod1'"/>	
		</sequence>							

		<sequence editable_state="true" name="'head_j'" triggable="true" once="true">	
			<object enabled="true" name="'g_head_j'"/>
			<object enabled="true" name="'g_head_j_lod1'"/>	
		</sequence>							

		<sequence editable_state="true" name="'head_k'" triggable="true" once="true">	
			<object enabled="true" name="'g_head_k'"/>
			<object enabled="true" name="'g_head_k_lod1'"/>	
		</sequence>							

		<sequence editable_state="true" name="'head_l'" triggable="true" once="true">	
			<object enabled="true" name="'g_head_l'"/>
			<object enabled="true" name="'g_head_l_lod1'"/>	
		</sequence>							

		<sequence editable_state="true" name="'head_m'" triggable="true" once="true">	
			<object enabled="true" name="'g_head_m'"/>
			<object enabled="true" name="'g_head_m_lod1'"/>	
		</sequence>							

		<!-- BALACLAVA W/ "INSIDE" FACE SEQUENCES -->
		<sequence editable_state="true" name="'head_balaclava'" triggable="true" once="true">	
			<object enabled="true" name="'g_balaclava'"/>
			<object enabled="true" name="'g_balaclava_lod1'"/>	

			<run_sequence name="'face_'..pick('a','b','c','d','e')" />										
		</sequence>							
		
		<!-- RANDOM HOLSTERS -->
		<sequence editable_state="true" name="'holster_l'" once="true" triggable="true">
			<object enabled="true" name="'g_holster_l'"/>
			<object enabled="true" name="'g_holster_l_lod1'"/>
			<object enabled="false" name="'g_holster_r'"/>
			<object enabled="false" name="'g_holster_r_lod1'"/>
		</sequence>

		<sequence editable_state="true" name="'holster_r'" once="true" triggable="true">
			<object enabled="true" name="'g_holster_l'"/>
			<object enabled="true" name="'g_holster_l_lod1'"/>
		</sequence>
		
		<sequence editable_state="true" name="'holster_twinnem'" once="true" triggable="true">
			<object enabled="true" name="'g_holster_l'"/>
			<object enabled="true" name="'g_holster_l_lod1'"/>
			<object enabled="true" name="'g_holster_r'"/>
			<object enabled="true" name="'g_holster_r_lod1'"/>
		</sequence>								
		<!-- RANDOM HOLSTERS end -->
		
		<sequence editable_state="true" name="'face_a'" once="true" triggable="true">
			<object enabled="true" name="'g_face_a'"/>
			<object enabled="true" name="'g_face_a_lod1'"/>
		</sequence>								
		<sequence editable_state="true" name="'face_b'" once="true" triggable="true">
			<object enabled="true" name="'g_face_b'"/>
			<object enabled="true" name="'g_face_b_lod1'"/>
		</sequence>								
		<sequence editable_state="true" name="'face_c'" once="true" triggable="true">
			<object enabled="true" name="'g_face_c'"/>
			<object enabled="true" name="'g_face_c_lod1'"/>
		</sequence>								
		<sequence editable_state="true" name="'face_d'" once="true" triggable="true">
			<object enabled="true" name="'g_face_d'"/>
			<object enabled="true" name="'g_face_d_lod1'"/>
		</sequence>								
		<sequence editable_state="true" name="'face_e'" once="true" triggable="true">
			<object enabled="true" name="'g_face_e'"/>
			<object enabled="true" name="'g_face_e_lod1'"/>
		</sequence>	
		<!-- END BALACALVA FACES -->
	
		<sequence editable_state="true" name="'disable_hitbox'" triggable="true">
			<body enabled="false" name="'body'"/>
			<body enabled="false" name="'Head'"/>
			<body enabled="false" name="'rag_LeftLeg'"/>
			<body enabled="false" name="'rag_RightLeg'"/>
			<body enabled="false" name="'rag_RightUpLeg'"/>
			<body enabled="false" name="'rag_LeftUpLeg'"/>
		</sequence>
		<sequence editable_state="true" name="'leg_arm_hitbox'" triggable="true">
			<body enabled="true" name="'body'"/>
			<body enabled="true" name="'Head'"/>
			<body enabled="false" motion="'keyframed'" name="'rag_Hips'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_LeftUpLeg'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_RightUpLeg'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_LeftLeg'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_RightLeg'"/>
			<body enabled="false" motion="'keyframed'" name="'rag_Spine'"/>
			<body enabled="false" motion="'keyframed'" name="'rag_Spine1'"/>
			<body enabled="false" motion="'keyframed'" name="'rag_Spine2'"/>
			<body enabled="false" motion="'keyframed'" name="'rag_LeftForeArm'"/>
			<body enabled="false" motion="'keyframed'" name="'rag_RightForeArm'"/>
			<body enabled="false" motion="'keyframed'" name="'rag_LeftArm'"/>
			<body enabled="false" motion="'keyframed'" name="'rag_RightArm'"/>
			<body enabled="false" motion="'keyframed'" name="'rag_Head'"/>
			<constraint enabled="false" name="'LeftUpLeg'"/>
			<constraint enabled="false" name="'RightUpLeg'"/>
			<constraint enabled="false" name="'LeftLeg'"/>
			<constraint enabled="false" name="'RightLeg'"/>
			<constraint enabled="false" name="'Spine'"/>
			<constraint enabled="false" name="'Spine1'"/>
			<constraint enabled="false" name="'Spine2'"/>
			<constraint enabled="false" name="'LeftForeArm'"/>
			<constraint enabled="false" name="'RightForeArm'"/>
			<constraint enabled="false" name="'LeftArm'"/>
			<constraint enabled="false" name="'RightArm'"/>
			<constraint enabled="false" name="'Head'"/>
		</sequence>
		<sequence editable_state="true" name="'prepare_ragdoll'" triggable="true">
			<body enabled="false" name="'bag'"/>
			<body enabled="false" name="'bag_gren'"/>		
			<body enabled="false" motion="'dynamic'" name="'rag_Hips'"/>
			<body enabled="false" motion="'dynamic'" name="'rag_LeftUpLeg'"/>
			<body enabled="false" motion="'dynamic'" name="'rag_RightUpLeg'"/>
			<body enabled="false" motion="'dynamic'" name="'rag_LeftLeg'"/>
			<body enabled="false" motion="'dynamic'" name="'rag_RightLeg'"/>
			<body enabled="false" motion="'dynamic'" name="'rag_Spine'"/>
			<body enabled="false" motion="'dynamic'" name="'rag_Spine1'"/>
			<body enabled="false" motion="'dynamic'" name="'rag_Spine2'"/>
			<body enabled="false" motion="'dynamic'" name="'rag_LeftForeArm'"/>
			<body enabled="false" motion="'dynamic'" name="'rag_RightForeArm'"/>
			<body enabled="false" motion="'dynamic'" name="'rag_LeftArm'"/>
			<body enabled="false" motion="'dynamic'" name="'rag_RightArm'"/>
			<body enabled="false" motion="'dynamic'" name="'rag_Head'"/>
		</sequence>
		<sequence editable_state="true" name="'switch_to_ragdoll'" triggable="true">
			<body enabled="false" name="'body'"/>
			<body enabled="false" name="'Head'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_Hips'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_LeftUpLeg'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_RightUpLeg'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_LeftLeg'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_RightLeg'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_Spine'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_Spine1'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_Spine2'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_LeftForeArm'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_RightForeArm'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_LeftArm'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_RightArm'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_Head'"/>
			<constraint enabled="true" name="'LeftUpLeg'"/>
			<constraint enabled="true" name="'RightUpLeg'"/>
			<constraint enabled="true" name="'LeftLeg'"/>
			<constraint enabled="true" name="'RightLeg'"/>
			<constraint enabled="true" name="'Spine'"/>
			<constraint enabled="true" name="'Spine1'"/>
			<constraint enabled="true" name="'Spine2'"/>
			<constraint enabled="true" name="'LeftForeArm'"/>
			<constraint enabled="true" name="'RightForeArm'"/>
			<constraint enabled="true" name="'LeftArm'"/>
			<constraint enabled="true" name="'RightArm'"/>
			<constraint enabled="true" name="'Head'"/>
		</sequence>
		<sequence editable_state="true" name="'freeze_ragdoll'" triggable="true">
			<body motion="'fixed'" name="'rag_Hips'"/>
			<body motion="'fixed'" name="'rag_LeftUpLeg'"/>
			<body motion="'fixed'" name="'rag_RightUpLeg'"/>
			<body motion="'fixed'" name="'rag_LeftLeg'"/>
			<body motion="'fixed'" name="'rag_RightLeg'"/>
			<body motion="'fixed'" name="'rag_Spine'"/>
			<body motion="'fixed'" name="'rag_Spine1'"/>
			<body motion="'fixed'" name="'rag_Spine2'"/>
			<body motion="'fixed'" name="'rag_LeftForeArm'"/>
			<body motion="'fixed'" name="'rag_RightForeArm'"/>
			<body motion="'fixed'" name="'rag_LeftArm'"/>
			<body motion="'fixed'" name="'rag_RightArm'"/>
			<body motion="'fixed'" name="'rag_Head'"/>
			<body motion="'fixed'" name="'jig_holster_right'"/>
			<body motion="'fixed'" name="'jig_holster_left'"/>
			<body motion="'fixed'" name="'body_holster_right'"/>
			<body motion="'fixed'" name="'body_holster_left'"/>						
			<constraint enabled="false" name="'LeftUpLeg'"/>
			<constraint enabled="false" name="'RightUpLeg'"/>
			<constraint enabled="false" name="'LeftLeg'"/>
			<constraint enabled="false" name="'RightLeg'"/>
			<constraint enabled="false" name="'Spine'"/>
			<constraint enabled="false" name="'Spine1'"/>
			<constraint enabled="false" name="'Spine2'"/>
			<constraint enabled="false" name="'LeftForeArm'"/>
			<constraint enabled="false" name="'RightForeArm'"/>
			<constraint enabled="false" name="'LeftArm'"/>
			<constraint enabled="false" name="'RightArm'"/>
			<constraint enabled="false" name="'Head'"/>
			<constraint enabled="false" name="'h_holster_left'"/>
			<constraint enabled="false" name="'h_holster_right'"/>			
		</sequence>
		<sequence editable_state="false" name="'swich_for_test'" triggable="false">
			<body enabled="false" name="'body'"/>
			<body enabled="false" name="'Head'"/>
			<body enabled="false" name="'mover_blocker'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_Hips'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_LeftUpLeg'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_RightUpLeg'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_LeftLeg'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_RightLeg'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_Spine'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_Spine1'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_Spine2'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_LeftForeArm'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_RightForeArm'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_LeftArm'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_RightArm'"/>
			<body enabled="true" motion="'keyframed'" name="'rag_Head'"/>
			<constraint enabled="true" name="'LeftUpLeg'"/>
			<constraint enabled="true" name="'RightUpLeg'"/>
			<constraint enabled="true" name="'LeftLeg'"/>
			<constraint enabled="true" name="'RightLeg'"/>
			<constraint enabled="true" name="'Spine'"/>
			<constraint enabled="true" name="'Spine1'"/>
			<constraint enabled="true" name="'Spine2'"/>
			<constraint enabled="true" name="'LeftForeArm'"/>
			<constraint enabled="true" name="'RightForeArm'"/>
			<constraint enabled="true" name="'LeftArm'"/>
			<constraint enabled="true" name="'RightArm'"/>
			<constraint enabled="true" name="'Head'"/>
		</sequence>
		<sequence editable_state="true" name="'activate_ragdoll_left_arm'" triggable="true">
			<run_sequence name="'swich_for_test'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_LeftForeArm'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_LeftArm'"/>
		</sequence>
		<sequence editable_state="true" name="'activate_ragdoll_right_arm'" triggable="true">
			<run_sequence name="'swich_for_test'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_RightForeArm'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_RightArm'"/>
		</sequence>
		<sequence editable_state="true" name="'activate_ragdoll_arms'" triggable="true">
			<run_sequence name="'swich_for_test'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_RightForeArm'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_RightArm'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_LeftForeArm'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_LeftArm'"/>
		</sequence>
		<sequence editable_state="true" name="'activate_ragdoll_head'" triggable="true">
			<run_sequence name="'swich_for_test'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_Head'"/>
		</sequence>
		<sequence editable_state="true" name="'activate_ragdoll_spine'" triggable="true">
			<run_sequence name="'swich_for_test'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_Head'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_RightForeArm'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_RightArm'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_LeftForeArm'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_LeftArm'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_Spine'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_Spine1'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_Spine2'"/>
		</sequence>
		<sequence editable_state="true" name="'activate_ragdoll_left_leg'" triggable="true">
			<run_sequence name="'swich_for_test'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_LeftUpLeg'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_LeftLeg'"/>
		</sequence>
		<sequence editable_state="true" name="'activate_ragdoll_right_leg'" triggable="true">
			<run_sequence name="'swich_for_test'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_RightUpLeg'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_RightLeg'"/>
		</sequence>
		<sequence editable_state="true" name="'activate_ragdoll_legs'" triggable="true">
			<run_sequence name="'swich_for_test'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_RightUpLeg'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_RightLeg'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_LeftUpLeg'"/>
			<body enabled="true" motion="'dynamic'" name="'rag_LeftLeg'"/>
		</sequence>
	</unit>
</sequence_manager>
